<script src="./device.js" type="text/javascript"></script> 

<div class="toolbar">

	<div class="btn-group">

		<!-- <span class="btn btn-small btn-info btn-home " ><i class="icon-home"></i> HOME</span> -->
		
		<span class="btn btn-mini btn-success btn-save-overwrite electron" ><i class="icon-save"></i> Save</span>
		<span class="btn btn-mini btn-warning btn-change-device electron" ><i class="icon-laptop"></i> Change device</span>
		<span class="btn btn-mini btn-danger btn-quick-build electron" ><i class="icon-cloud-upload"></i> Build & Upload</span>

		<span class="btn btn-mini btn-info btn-serial electron" ><i class="icon-bolt"></i> Serial Monitor</span>
		<span class="btn btn-mini btn-primary btn-mqtt electron" ><i class="icon-comments-alt"></i> MQTT Log</span>

		<span class="btn btn-mini btn-primary btn-generate-config browser" ><i class="icon-edit"></i> Generate</span>
		<span class="btn btn-mini btn-warning browser btn-browser-notwork" data-original-title="This feature only work with desktop version. Please download to use"><i class="icon-laptop"></i> Change device</span>
		<span class="btn btn-mini btn-danger browser  btn-browser-notwork" data-original-title="This feature only work with desktop version. Please download to use"><i class="icon-cloud-upload"></i> Build&Upload</span>
		<span class="btn btn-mini btn-info browser  btn-browser-notwork" data-original-title="This feature only work with desktop version. Please download to use"><i class="icon-bolt"></i> Serial Monitor</span>
		<span class="btn btn-mini btn-primary browser  btn-browser-notwork" data-original-title="This feature only work with desktop version. Please download to use"><i class="icon-comments-alt"></i> MQTT Log</span>		
		<!-- <span class="btn btn-small btn-grey browser" >Download desktop app to "Save" and "Load" config</span> -->

	</div>


	<div class="btn-group" style="float:right">
			<span  class="btn btn-mini btn-primary btn-create-user-app electron" >
				<i class="icon  icon-bar-chart"></i> Create Mobile App				
			</span>

			<span  class="btn btn-mini btn-primary browser btn-browser-notwork" >
					<i class="icon  icon-lightbulb"></i> Create Mobile App				
			</span>
			
			<a onclick="app.openUrl(currentDevice.link)" class="btn btn-mini btn-info btn-help electron" ><i class="icon  icon-lightbulb"></i> HELP ME!</a>
			<a target="_blank" class="btn btn-mini btn-info btn-help-browser browser" ><i class="icon  icon-lightbulb"></i> HELP ME!</a>
		<span class="btn btn-mini btn-grey btn-device" ></span>
	
	</div>	


</div>  <!-- END TOOLBAR -->

<br><br>

<div class="row-fluid">
<div class="span9 div_container_device" style="overflow-y: scroll;">

<form id="frm_omg">
<table style="width: 100%" class="table table-bordered table-condensed" id="tbl_omg_config">
	<tr>
		<td colspan="4" class="">
			<strong>Source code version of current project: <input type="text" style="width:50px" readonly name="OMG_VERSION" value="0.9.1"> 
			</strong>
			<div id="div_older_omg"></div>
		</td>
	</tr>
	<tr>
		<td colspan="4" class="widget-header header-color-red3 hasTooltip" tooltip="Network configuration for device."><strong>
		I. NETWORK PARAMETERS</strong></td>
	</tr>
	<tr>
		<td colspan="4"><div style="padding:0px;color:#0a384e;margin-bottom:0px" class="alert alert-info div_network_info"></div> </td>	
	</tr>
	<tr id="tr_network_setup"> 
			
		<td style="width:15%">Network Config: </td>
		<td style="width:35%">
			
			<select data-quote="" name="ESPWifiManualSetup" id="ESPWifiManualSetup" class="required hasTooltip" tooltip=''>
				<!-- <option value="">--Select network config type---</option> -->
				<option value="false">Setup through Device Wifi</option>
				<option value="true" >Manual config</option>
			</select>
		</td>
		<td style="width:25%">Gateway (Device) name.</td>
		<td style="width:25%"><input data-command="#define" tooltip="Work as root path of data broadcast to MQTT server" name="Gateway_Name" id="Gateway_Name" type="text" value="OpenMQTTGateway" class="required hasTooltip"></td>
	</tr>
	<tr>	
		<td colspan="4">
		<div id="div_device_wifi_setup" >
		<table style="width: 100%">
			<tr >
				<td>Device Wifi name</td>
				<td>
				<input class="hasTooltip" tooltip="this is the network name of the initial setup access point" data-command="#define" name="WifiManager_ssid" type="text" value="OpenMQTTGateway"></td>
			</tr>
			<tr>
				<td>Device Wifi password</td>
				<td>
				<input class="hasTooltip" tooltip="this is going to be the WPA2-PSK password for the initial setup access point " name="WifiManager_password" type="text" value="your_password"></td>				
			</tr>
			<tr>
				<td>Config Portal TimeOut</td>
				<td>
				<input name="WifiManager_ConfigPortalTimeOut" type="number"  value="120"></td>				
			</tr>			
		</table>
		</div>
		<div id="div_manual_network_setup">
			<table style="width: 100%">
				<tr >
					<td>Wifi name device connect to</td>
					<td><input data-command="#define" name="wifi_ssid" type="text" value="White House"></td>
				</tr>
				<tr>
					<td>Wifi password</td>
					<td><input data-command="#define" name="wifi_password" type="text" value="mnmnmnmn"></td>
				</tr>				
	
				<tr>
					<td>MQTT server IP</td>
					<td><input data-command="char" data-param-name="mqtt_server[40]" name="mqtt_server" type="text" value="192.168.1.100"></td>
				</tr>
				<tr>
					<td>MQTT host name device connect to</td>
					<td>
						<input type="checkbox" value="1" class="checkbox_show inputbox" name="checkbox_mqtt_server_name">
						<!-- <span class="lbl"> </span> -->
						<input class="field" name="mqtt_server_name" id="mqtt_server_name" type="text" value="www.mqtt_broker.com" data-hide-code="1">
					</td>
					</tr>
				<tr>
					<td>MQTT port</td>
					<td><input data-command="char" data-param-name="mqtt_port[6]" name="mqtt_port" type="text" value="1883"></td>
				</tr>							
				<tr>
					<td>MQTT user</td>
					<td><input data-command="char"  class="hasTooltip" tooltip="not compulsory only if your broker needs authentication "   data-param-name="mqtt_user[20]" name="mqtt_user" type="text"></td>
				</tr>
					<td>MQTT password</td>
					<td><input data-command="char"  data-param-name="mqtt_pass[30]" name="mqtt_pass" type="text"></td>
				</tr>

			</table>
		</div>		
		</td>

	</tr>


	<tr>
		<td colspan="4" class="widget-header header-color-red3" class="hasTooltip" tooltip="DEFINE THE MODULES YOU WANT BELOW " ><strong>
		II. MODULES CONFIGURATION -  [<a style="color:#ccdfff" href="https://docs.google.com/spreadsheets/d/1_5fQjAixzRtepkykmL-3uN3G5bLfQ0zMajM9OBZ1bx0/edit#gid=1323184277" target="_blank">List module,devices,compatiple PIN..</a>]</strong> </td>
	</tr>
	<tr>
		<td colspan="4">
		<table style="width: 100%" id="tbl_module">
		<thead>
			<tr>
				<th style="width: 31px">#</th >
				<th style="width: 81px">Module </th >
				<th >&nbsp;</th >
			</tr>
		</thead>
		<tbody>

        <script type="text/template" class="template" id="tpl-module">
        <% 
        var tr_count = 0;  
        _.each(rows, function(row){
            tr_count++;
        %>
            <tr>
				<td class="<%= row.class %>">
                    <input type ="checkbox" data-command="#define" data-module-id="<%= row.id %>"  data-module-code="<%= row.code %>"
					data-filename="<%= row.config_file_name %>" value="<%= row.code %>"
					exclude-module = "<%= row.exclude_module %>"
                    name="<%= row.name %>"  id="<%= row.name %>" class="module_chooser">
                    <!-- <span class="lbl"> </span>                                -->
                </td>
				<td class="<%= row.class %>"><%= row.label %></td>
				<td>
					<div class="div_module_chooser"></div>
				</td>
			</tr>
        <% }) %>
        </script>


		</tbody>	
		</table>
		</td>
	</tr>

    
</table>
</form>
</div> <!-- End DIV span8 form  -->

<!--  START RIGHT BLOCK -->
<!--  START RIGHT BLOCK -->
<!--  START RIGHT BLOCK -->

<div class="span3 div_container_device" style="overflow-y: scroll;margin-left:3px;width:25%">

	<textarea class="copy_wrapper" style="display:none"></textarea>
		
	<div class="widget-box pricing-box electron">
		<div class="widget-header header-color-orange">
			<h5 class="bigger lighter">App log</h5>
		</div>

		<div class="widget-body">
			<div class="widget-main code-container" style="padding: 0px;height: 250px">
				<table class="table table-bordered table-condensed table-striped" id="div_log" >
					
				</table>										
			</div>
		</div>
	</div>


	<div class="div_file_wrapper">
		<h3 class="header smaller red">User_config.h <span class="btn btn-mini btn-success btn-copy"><i class="icon-document"></i> Copy to Clipboard</span> 
		</h3>
		<div class="well code-container"  id="div_user_config">Set config, choose your modules and the press "Generate Config"</div>
		
	<div>

	<div  id="div_module_config"></div>

</div> <!-- End DIV right block (show code)  -->			



</div> <!-- End row fluid -->






